// Source code is decompiled from a .class file using FernFlower decompiler.
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintStream;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Scanner;

public class StudentManager {
   private ArrayList<Student> students = new ArrayList();
   private final String filename = "students.txt";

   public StudentManager() {
      this.loadFromFile();
   }

   public void addStudent(Student var1) {
      this.students.add(var1);
      this.saveToFile();
   }

   public void listStudents() {
      if (this.students.isEmpty()) {
         System.out.println("No students found.");
      } else {
         Iterator var1 = this.students.iterator();

         while(var1.hasNext()) {
            Student var2 = (Student)var1.next();
            PrintStream var10000 = System.out;
            String var10001 = var2.getId();
            var10000.println("ID: " + var10001 + ", Name: " + var2.getName() + ", Age: " + var2.getAge());
         }

      }
   }

   public Student searchById(String var1) {
      Iterator var2 = this.students.iterator();

      Student var3;
      do {
         if (!var2.hasNext()) {
            return null;
         }

         var3 = (Student)var2.next();
      } while(!var3.getId().equalsIgnoreCase(var1));

      return var3;
   }

   public void updateStudent(String var1, String var2, int var3) {
      Student var4 = this.searchById(var1);
      if (var4 != null) {
         var4.setName(var2);
         var4.setAge(var3);
         this.saveToFile();
         System.out.println("Student updated.");
      } else {
         System.out.println("Student not found.");
      }

   }

   public void deleteStudent(String var1) {
      Student var2 = this.searchById(var1);
      if (var2 != null) {
         this.students.remove(var2);
         this.saveToFile();
         System.out.println("Student deleted.");
      } else {
         System.out.println("Student not found.");
      }

   }

   public void saveToFile() {
      try {
         PrintWriter var1 = new PrintWriter(new FileWriter("students.txt"));

         try {
            Iterator var2 = this.students.iterator();

            while(var2.hasNext()) {
               Student var3 = (Student)var2.next();
               var1.println(var3.toString());
            }
         } catch (Throwable var5) {
            try {
               var1.close();
            } catch (Throwable var4) {
               var5.addSuppressed(var4);
            }

            throw var5;
         }

         var1.close();
      } catch (IOException var6) {
         System.out.println("Failed to save file: " + var6.getMessage());
      }

   }

   public void loadFromFile() {
      File var1 = new File("students.txt");
      if (var1.exists()) {
         try {
            Scanner var2 = new Scanner(var1);

            try {
               while(var2.hasNextLine()) {
                  this.students.add(Student.fromString(var2.nextLine()));
               }
            } catch (Throwable var6) {
               try {
                  var2.close();
               } catch (Throwable var5) {
                  var6.addSuppressed(var5);
               }

               throw var6;
            }

            var2.close();
         } catch (IOException var7) {
            System.out.println("Failed to load file: " + var7.getMessage());
         }

      }
   }
}
